#
# Global Variables
#
set -gx fish_greeting ""
set -gx VISUAL "nvim"
set -gx $EDITOR "nvim"
{{- if eq .chezmoi.os "linux" }}
{{ if .is_wayland }}
set -gx TERMINAL "footclient"
{{ else }}
set -gx TERMINAL "alacritty"
{{ end }}

# Fuzzy file picker commands
if type -q rg
    set -gx FZF_DEFAULT_COMMAND "rg --files --hidden -g '!.git/' "
    set -gx SKIM_DEFAULT_COMMAND "rg --files --hidden -g '!git/' "
end
#
# Display related vars
#
{{- if .is_x11 }}
unset WAYLAND_DISPLAY
unset GDK_BACKEND
set -gx GDK_BACKEND "x11"
set -gx DISPLAY :0.0
{{- else if .is_wayland }}
unset GDK_BACKEND
unset DISPLAY
set -gx WAYLAND_DISPLAY "wayland-0"
set -gx GDK_BACKEND "wayland"
{{- else if .is_wsl }}
{{- if (contains "microsoft-standard-WSL2" .chezmoi.kernel.osrelease) }}
set -gx DISPLAY (awk '/nameserver / {print $2; exit}' /etc/resolv.conf 2>/dev/null):0
set -gx LIBGL_ALWAYS_INDIRECT 1
{{ end -}}
{{ end }}

#
# PATHS (requires fish 3.2)
#
fish_add_path /bin
fish_add_path /usr/bin
fish_add_path ~/bin
fish_add_path ~/.local/bin
fish_add_path /usr/local/bin
fish_add_path /snap/bin

# Go PATH
fish_add_path /usr/local/go/bin
fish_add_path ~/go/bin

# Rust PATH
fish_add_path ~/.cargo/bin

{{ end -}}

#
# Colors
#

set -u fish_color_autosuggestion 6272A4
set -u fish_color_cancel \x2dr
set -u fish_color_command 50FA7B
set -u fish_color_comment 8BE9FD
set -u fish_color_cwd green
set -u fish_color_cwd_root red
set -u fish_color_end 50FA7B
set -u fish_color_error FF5555
set -u fish_color_escape 00a6b2
set -u fish_color_history_current \x2d\x2dbold
set -u fish_color_host normal
set -u fish_color_host_remote yellow
set -u fish_color_match \x2d\x2dbackground\x3dbrblue
set -u fish_color_normal normal
set -u fish_color_operator 00a6b2
set -u fish_color_param FF79C6
set -u fish_color_quote F1FA8C
set -u fish_color_redirection BD93F9
set -u fish_color_search_match bryellow\x1e\x2d\x2dbackground\x3dbrblack
set -u fish_color_selection white\x1e\x2d\x2dbold\x1e\x2d\x2dbackground\x3dbrblack
set -u fish_color_status red
set -u fish_color_user brgreen
set -u fish_color_valid_path \x2d\x2dunderline
set -u fish_pager_color_completion normal
set -u fish_pager_color_description B3A06D\x1eyellow
set -u fish_pager_color_prefix white\x1e\x2d\x2dbold\x1e\x2d\x2dunderline
set -u fish_pager_color_progress brwhite\x1e\x2d\x2dbackground\x3dcyan
